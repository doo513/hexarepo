# ğŸ”§ HexaCTF í”„ë¡œì íŠ¸ ì™„ë²½ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [í´ë” êµ¬ì¡°](#í´ë”-êµ¬ì¡°)
3. [í•µì‹¬ ì»´í¬ë„ŒíŠ¸](#í•µì‹¬-ì»´í¬ë„ŒíŠ¸)
4. [ì‘ë™ ì›ë¦¬](#ì‘ë™-ì›ë¦¬)
5. [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
6. [ì„¤ì • ë° ì‹¤í–‰](#ì„¤ì •-ë°-ì‹¤í–‰)
7. [ë°ì´í„° í˜•ì‹](#ë°ì´í„°-í˜•ì‹)
8. [ì£¼ìš” ê°œë…](#ì£¼ìš”-ê°œë…)

---

## í”„ë¡œì íŠ¸ ê°œìš”

**HexaCTF**ëŠ” ì‘ì€ ê·œëª¨ì˜ CTF(Capture The Flag) ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥
- ğŸ³ **Docker ì»¨í…Œì´ë„ˆë¡œ ë¬¸ì œ ì‹¤í–‰** - ê° ë¬¸ì œë¥¼ ë…ë¦½ì ì¸ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰
- ğŸŒ **ì›¹ UIë¡œ ê´€ë¦¬** - ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¬¸ì œ ì‹œì‘/ì¢…ë£Œ
- ğŸ”„ **ì¸ìŠ¤í„´ìŠ¤ ìë™ ê´€ë¦¬** - ì»¨í…Œì´ë„ˆ ìƒì„±, í¬íŠ¸ í• ë‹¹, ìƒíƒœ ì¶”ì 
- ğŸ’¾ **ìƒíƒœ ì €ì¥** - JSON íŒŒì¼ë¡œ ëª¨ë“  ì‹¤í–‰ ì¤‘ì¸ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ ë³´ê´€

---

## í´ë” êµ¬ì¡°

```
hexactf/
â”œâ”€â”€ ğŸ“ auto_api/              # ë°±ì—”ë“œ (FastAPI)
â”‚   â”œâ”€â”€ api.py               # ë©”ì¸ API ì„œë²„ (ì—”ë“œí¬ì¸íŠ¸ ì •ì˜)
â”‚   â”œâ”€â”€ auto_deploy.py       # Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰
â”‚   â”œâ”€â”€ auto_stop.py         # ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ë° ì •ë¦¬
â”‚   â””â”€â”€ test.py              # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚
â”œâ”€â”€ ğŸ“ static/                # í”„ë¡ íŠ¸ì—”ë“œ (ì›¹ UI)
â”‚   â”œâ”€â”€ index.html           # ì›¹ í˜ì´ì§€ êµ¬ì¡°
â”‚   â”œâ”€â”€ app.js               # í´ë¼ì´ì–¸íŠ¸ ë¡œì§ (JavaScript)
â”‚   â””â”€â”€ style.css            # ìŠ¤íƒ€ì¼ë§
â”‚
â”œâ”€â”€ ğŸ“ challenges/            # ë¬¸ì œ ëª¨ìŒ
â”‚   â””â”€â”€ pwn1/                # ê° ë¬¸ì œë§ˆë‹¤ í´ë”
â”‚       â”œâ”€â”€ Dockerfile       # ì»¨í…Œì´ë„ˆ ë¹Œë“œ ì •ì˜
â”‚       â””â”€â”€ deploy/          # ë°°í¬ íŒŒì¼ (ì‹¤í–‰ íŒŒì¼, í”Œë˜ê·¸ ë“±)
â”‚
â”œâ”€â”€ ğŸ“„ challenges.json        # ë¬¸ì œ ëª©ë¡ ë° ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ ğŸ“„ instances.json         # í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´
â””â”€â”€ ğŸ“„ PORTS.md              # í¬íŠ¸ í• ë‹¹ ê¸°ë¡
```

---

## í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1ï¸âƒ£ **ë°±ì—”ë“œ (auto_api/)**

#### `api.py` - ë©”ì¸ ì„œë²„
FastAPIë¥¼ ì‚¬ìš©í•œ REST API ì„œë²„ì…ë‹ˆë‹¤.

**ì—­í• :**
- í”„ë¡ íŠ¸ì—”ë“œì˜ ìš”ì²­ì„ ë°›ìŒ
- ë¬¸ì œ ì‹œì‘/ì¢…ë£Œ ëª…ë ¹ ì²˜ë¦¬
- ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ ì¡°íšŒ
- JSON íŒŒì¼ë¡œ ìƒíƒœ ì €ì¥/ë¡œë“œ

**ì£¼ìš” í•¨ìˆ˜:**
```python
load_state()        # instances.json ì½ê¸°
save_state(state)   # instances.json ì“°ê¸°
load_challenges()   # challenges.json ì½ê¸°
```

---

#### `auto_deploy.py` - Docker ìë™ ë°°í¬
ìƒˆë¡œìš´ ë¬¸ì œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ì‘ë™ ìˆœì„œ:**
```
1. ë¬¸ì œ í´ë”ì—ì„œ Dockerfile ì°¾ê¸°
   â†“
2. Docker ì´ë¯¸ì§€ ë¹Œë“œ
   docker build -t {ë¬¸ì œëª…} {ë¬¸ì œí´ë”}
   â†“
3. ì‚¬ìš© ê°€ëŠ¥í•œ í¬íŠ¸ ì°¾ê¸° (30000~40000)
   lsof ëª…ë ¹ìœ¼ë¡œ ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ í™•ì¸
   â†“
4. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
   docker run -p {ì™¸ë¶€í¬íŠ¸}:{ë‚´ë¶€í¬íŠ¸} {ì´ë¯¸ì§€}
   â†“
5. ì •ë³´ë¥¼ instances.jsonì— ì €ì¥
```

**ì˜ˆì‹œ:**
- ë¬¸ì œëª…: `pwn1`
- ì´ë¯¸ì§€ëª…: `pwn1` (ì†Œë¬¸ì)
- ì»¨í…Œì´ë„ˆëª…: `pwn1_2` (pwn1_ì¸ìŠ¤í„´ìŠ¤ID)
- ì™¸ë¶€ URL: `http://192.168.0.163:30001`

---

#### `auto_stop.py` - ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
ì‹¤í–‰ ì¤‘ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.

**ì‘ë™:**
```
1. ì»¨í…Œì´ë„ˆ ì¢…ë£Œ (docker stop)
2. ì»¨í…Œì´ë„ˆ ì‚­ì œ (docker rm)
3. instances.jsonì—ì„œ ì •ë³´ ì œê±°
```

---

### 2ï¸âƒ£ **í”„ë¡ íŠ¸ì—”ë“œ (static/)**

#### `index.html` - ì›¹ í˜ì´ì§€
ì‚¬ìš©ìê°€ ë³´ëŠ” í™”ë©´ì…ë‹ˆë‹¤.
- ë¬¸ì œ ëª©ë¡ í‘œì‹œ
- "ì‹œì‘" ë²„íŠ¼ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
- "ì¢…ë£Œ" ë²„íŠ¼ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ

#### `app.js` - í´ë¼ì´ì–¸íŠ¸ ë¡œì§
ë²„íŠ¼ í´ë¦­ ì‹œ ë°±ì—”ë“œ API í˜¸ì¶œí•©ë‹ˆë‹¤.

**ì£¼ìš” ë™ì‘:**
```javascript
// API ìš”ì²­ ì˜ˆì‹œ
POST /api/start {"problem": "pwn1"}
  â†“
ë°±ì—”ë“œì—ì„œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
  â†“
í”„ë¡ íŠ¸ì—”ë“œê°€ URL í‘œì‹œ
  â†“
ì‚¬ìš©ìê°€ í´ë¦­í•´ì„œ ì ‘ì†
```

---

## ì‘ë™ ì›ë¦¬

### ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ìš©ìê°€ "pwn1" ë¬¸ì œë¥¼ ì‹œì‘í•˜ë©´?

```
[ì›¹ UI] ì‹œì‘ ë²„íŠ¼ í´ë¦­
   â†“
[app.js] POST /api/start
   â†“
[api.pyì˜ start() í•¨ìˆ˜]
   â”œâ”€ 1. instances.jsonì—ì„œ ë‹¤ìŒ ID ìƒì„± (ì˜ˆ: ID = 2)
   â”œâ”€ 2. auto_deploy.deploy_bg() í˜¸ì¶œ (ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰)
   â””â”€ ì‘ë‹µ: {"instance_id": 2}
   â†“
[auto_deploy.py]
   â”œâ”€ 1. Dockerfile ì°¾ê¸°
   â”œâ”€ 2. docker build -t pwn1 challenges/pwn1/
   â”œâ”€ 3. í¬íŠ¸ í• ë‹¹ (ì˜ˆ: 30001)
   â”œâ”€ 4. docker run -p 30001:5001 pwn1_2
   â””â”€ 5. instances.json ì—…ë°ì´íŠ¸
        {
          "2": {
            "status": "running",
            "container": "pwn1_2",
            "port": 30001,
            "url": "http://192.168.0.163:30001"
          }
        }
   â†“
[ì›¹ UI] ìƒíƒœ ì¡°íšŒ (GET /api/instances)
   â†“
ì‚¬ìš©ìì—ê²Œ "http://192.168.0.163:30001" URL í‘œì‹œ âœ…
```

### ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ìš©ìê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¢…ë£Œí•˜ë©´?

```
[ì›¹ UI] ì¢…ë£Œ ë²„íŠ¼ í´ë¦­ (instance_id = 2)
   â†“
[app.js] POST /api/stop/2
   â†“
[api.pyì˜ stop() í•¨ìˆ˜]
   â”œâ”€ 1. instances.jsonì—ì„œ ID 2ì˜ ì»¨í…Œì´ë„ˆëª… í™•ì¸ (pwn1_2)
   â”œâ”€ 2. auto_stop.stop() í˜¸ì¶œ
   â””â”€ ì‘ë‹µ ì„±ê³µ
   â†“
[auto_stop.py]
   â”œâ”€ docker stop pwn1_2
   â”œâ”€ docker rm pwn1_2
   â””â”€ instances.jsonì—ì„œ ì œê±°
   â†“
âœ… ì •ë¦¬ ì™„ë£Œ
```

---

## API ì—”ë“œí¬ì¸íŠ¸

### 1. `GET /` - ì›¹ í˜ì´ì§€
```
ì—­í• : index.html íŒŒì¼ ë°˜í™˜ (ì›¹ UI í‘œì‹œ)
ì‘ë‹µ: HTML í˜ì´ì§€
```

### 2. `POST /api/start` - ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘
```
ìš”ì²­:
{
  "problem": "pwn1"
}

ì‘ë‹µ:
{
  "instance_id": 2,
  "status": "starting"
}
```

### 3. `POST /api/stop/{instance_id}` - ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ
```
ìš”ì²­:
/api/stop/2

ì‘ë‹µ:
{
  "success": true,
  "message": "Instance 2 stopped"
}
```

### 4. `GET /api/instances` - ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ ì¡°íšŒ
```
ì‘ë‹µ:
{
  "1": {
    "status": "running",
    "container": "pwn1_1",
    "port": 30000,
    "url": "http://192.168.0.163:30000"
  },
  "2": {
    "status": "running",
    "container": "pwn2_2",
    "port": 30001,
    "url": "http://192.168.0.163:30001"
  }
}
```

### 5. `GET /api/status/{instance_id}` - íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ ì¡°íšŒ
```
ìš”ì²­:
/api/status/1

ì‘ë‹µ:
{
  "status": "running",
  "container": "pwn1_1",
  "port": 30000,
  "url": "http://192.168.0.163:30000"
}
```

---

## ì„¤ì • ë° ì‹¤í–‰

### ìš”êµ¬ì‚¬í•­
- **Docker** - ì»¨í…Œì´ë„ˆ ë¹Œë“œ/ì‹¤í–‰
- **Python 3.7+** - ë°±ì—”ë“œ ì‹¤í–‰
- **lsof** - í¬íŠ¸ ê°€ìš©ì„± í™•ì¸

### ì„¤ì¹˜

```bash
# 1. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install fastapi uvicorn pydantic

# 2. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /home/hexa/hexactf
```

### ì‹¤í–‰

```bash
# ë°±ì—”ë“œ ì„œë²„ ì‹œì‘ (í¬íŠ¸ 8000)
uvicorn auto_api.api:app --reload --host 0.0.0.0 --port 8000
```

### ì ‘ì†

```
ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000 ìœ¼ë¡œ ì ‘ì†
```

---

## ë°ì´í„° í˜•ì‹

### `challenges.json` - ë¬¸ì œ ëª©ë¡
```json
{
  "pwn1": {
    "challenge_id": "pwn-01-basic",
    "title": "ê¸°ì´ˆ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°",
    "dir": "/home/hexa/hexactf/challenges/pwn1",
    "category": "pwn",
    "score": 100,
    "port": 5001,
    "type": "pwn",
    "downloads": [
      {
        "label": "prob",
        "path": "deploy/prob"
      }
    ],
    "deploy": "docker",
    "flag_path": "deploy/flag.txt"
  }
}
```

**ê° í•„ë“œ ì„¤ëª…:**
| í•„ë“œ | ì„¤ëª… |
|------|------|
| `challenge_id` | ê³ ìœ  ë¬¸ì œ ID |
| `title` | ë¬¸ì œ ì œëª© |
| `dir` | ë¬¸ì œ í´ë” ê²½ë¡œ |
| `category` | ë¶„ë¥˜ (pwn, web, crypto ë“±) |
| `score` | ë¬¸ì œ ì ìˆ˜ |
| `port` | ë‚´ë¶€ ê¸°ë³¸ í¬íŠ¸ (Dockerfileì˜ EXPOSE) |
| `downloads` | ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ íŒŒì¼ ëª©ë¡ |
| `flag_path` | í”Œë˜ê·¸ íŒŒì¼ ê²½ë¡œ |

### `instances.json` - ì‹¤í–‰ ì¤‘ì¸ ì¸ìŠ¤í„´ìŠ¤
```json
{
  "next_instance_id": 3,
  "instances": {
    "1": {
      "problem": "pwn1",
      "status": "running",
      "container": "pwn1_1",
      "port": 30000,
      "url": "http://192.168.0.163:30000",
      "start_time": "2026-02-01T10:30:00"
    },
    "2": {
      "problem": "pwn2",
      "status": "running",
      "container": "pwn2_2",
      "port": 30001,
      "url": "http://192.168.0.163:30001",
      "start_time": "2026-02-01T10:35:00"
    }
  }
}
```

**ê° í•„ë“œ ì„¤ëª…:**
| í•„ë“œ | ì„¤ëª… |
|------|------|
| `next_instance_id` | ë‹¤ìŒì— í• ë‹¹í•  ì¸ìŠ¤í„´ìŠ¤ ID |
| `problem` | ì–´ë–¤ ë¬¸ì œì¸ì§€ |
| `status` | ìƒíƒœ (running, stopped, error) |
| `container` | Docker ì»¨í…Œì´ë„ˆëª… |
| `port` | í• ë‹¹ëœ ì™¸ë¶€ í¬íŠ¸ |
| `url` | ì ‘ì† ê°€ëŠ¥í•œ URL |
| `start_time` | ì‹œì‘ ì‹œê°„ |

---

## ì£¼ìš” ê°œë…

### 1. Docker ì´ë¯¸ì§€ vs ì»¨í…Œì´ë„ˆ
```
ğŸ“¦ ì´ë¯¸ì§€: ì»¨í…Œì´ë„ˆì˜ ì²­ì‚¬ì§„ (í•œ ë²ˆë§Œ ë¹Œë“œ)
   â”œâ”€ Dockerfileì—ì„œ ì •ì˜
   â””â”€ docker buildë¡œ ìƒì„±

ğŸƒ ì»¨í…Œì´ë„ˆ: ì‹¤í–‰ ì¤‘ì¸ ì´ë¯¸ì§€ (ì—¬ëŸ¬ ê°œ ë™ì‹œ ì‹¤í–‰ ê°€ëŠ¥)
   â”œâ”€ ê° ì‚¬ìš©ìê°€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰
   â””â”€ ê³ ìœ í•œ í¬íŠ¸, ID, ìƒíƒœ ê°€ì§
```

**ì˜ˆì‹œ:**
- `pwn1` ì´ë¯¸ì§€ â†’ ì—¬ëŸ¬ ê°œì˜ `pwn1_1`, `pwn1_2`, `pwn1_3` ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ê°€ëŠ¥
- ê° ì»¨í…Œì´ë„ˆëŠ” ì„œë¡œ ë…ë¦½ì  (í¬íŠ¸ ë‹¤ë¦„, ìƒíƒœ ë‹¤ë¦„)

### 2. í¬íŠ¸ í• ë‹¹
```
ë‚´ë¶€ í¬íŠ¸: Dockerfileì˜ EXPOSEë¡œ ì •ì˜
   ì˜ˆ) EXPOSE 5001
   
ì™¸ë¶€ í¬íŠ¸: ì‹œìŠ¤í…œì—ì„œ ìë™ í• ë‹¹ (30000~40000)
   lsofë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í¬íŠ¸ ì°¾ìŒ
   
í¬íŠ¸ ë§¤í•‘: docker run -p {ì™¸ë¶€í¬íŠ¸}:{ë‚´ë¶€í¬íŠ¸}
   ì˜ˆ) -p 30000:5001
   â†’ ì‚¬ìš©ìê°€ 30000ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ì»¨í…Œì´ë„ˆì˜ 5001ë¡œ ì „ë‹¬
```

### 3. ì¸ìŠ¤í„´ìŠ¤ ID
```
ê° ì‹¤í–‰ë§ˆë‹¤ ê³ ìœ í•œ ID ë¶€ì—¬
   ì¸ìŠ¤í„´ìŠ¤ 1 â†’ ì‚¬ìš©ì Aê°€ pwn1 ì‹œì‘
   ì¸ìŠ¤í„´ìŠ¤ 2 â†’ ì‚¬ìš©ì Bê°€ pwn1 ì‹œì‘
   ì¸ìŠ¤í„´ìŠ¤ 3 â†’ ì‚¬ìš©ì Cê°€ pwn2 ì‹œì‘
   
ê°™ì€ ë¬¸ì œë¼ë„ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ = ë…ë¦½ì  ì‹¤í–‰ í™˜ê²½
```

### 4. ìƒíƒœ ê´€ë¦¬
```
instances.json íŒŒì¼ì—ë§Œ ì €ì¥ (ë°ì´í„°ë² ì´ìŠ¤ ì—†ìŒ)
   ì¥ì : ê°„ë‹¨í•¨, ì„¤ì • ì—†ìŒ
   ë‹¨ì : íŒŒì¼ ë™ì‹œ ì ‘ê·¼ ì‹œ ì¶©ëŒ ê°€ëŠ¥
   
âš ï¸ ì£¼ì˜: ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì‹œì‘/ì¢…ë£Œí•˜ë©´ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
   (í–¥í›„: íŒŒì¼ ë½ ì¶”ê°€ ê¶Œì¥)
```

---

## ğŸ“Š íë¦„ë„

### ì „ì²´ ì‹œìŠ¤í…œ íë¦„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì (ì›¹ ë¸Œë¼ìš°ì €)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ HTTP ìš”ì²­
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   í”„ë¡ íŠ¸ì—”ë“œ         â”‚
â”‚  (static/app.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ REST API
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ë°±ì—”ë“œ (FastAPI)            â”‚
â”‚   auto_api/api.py               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /api/start     â†’ auto_deploy    â”‚
â”‚ /api/stop      â†’ auto_stop      â”‚
â”‚ /api/instances â†’ instances.json â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â†’ Docker ë¹Œë“œ/ì‹¤í–‰ â”€â”€â†’ ğŸ³ ì»¨í…Œì´ë„ˆ ìƒì„±
           â”‚
           â””â”€â†’ instances.json ìˆ˜ì •
```

---

## ğŸš€ ì‚¬ìš© ì˜ˆì‹œ

### ì˜ˆì‹œ 1: pwn1 ë¬¸ì œ ì‹œì‘
```bash
# 1. ì›¹ UIì—ì„œ "pwn1" ì˜† "ì‹œì‘" ë²„íŠ¼ í´ë¦­
# 2. ë°±ì—”ë“œê°€ ìë™ìœ¼ë¡œ:
#    - Docker ì´ë¯¸ì§€ ë¹Œë“œ
#    - ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (í¬íŠ¸: 30000)
#    - instances.json ì—…ë°ì´íŠ¸

# 3. ì›¹ UIì— ë‚˜íƒ€ë‚˜ëŠ” URL í´ë¦­
# 4. http://192.168.0.163:30000 ìœ¼ë¡œ ì ‘ì†
# 5. ë¬¸ì œ í’€ê¸°

# 6. ì¢…ë£Œ ë²„íŠ¼ í´ë¦­
# 7. ì»¨í…Œì´ë„ˆ ìë™ ì •ë¦¬
```

### ì˜ˆì‹œ 2: ëª…ë ¹ì–´ë¡œ ì§ì ‘ í™•ì¸
```bash
# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸
docker ps

# íŠ¹ì • ì»¨í…Œì´ë„ˆ ë¡œê·¸ ë³´ê¸°
docker logs pwn1_1

# í¬íŠ¸ ì‚¬ìš© í™•ì¸
lsof -i :30000

# instances.json í™•ì¸
cat instances.json
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ê°œì„ ì 

### í˜„ì¬ ë¬¸ì œì 

1. **í•˜ë“œì½”ë”©ëœ í˜¸ìŠ¤íŠ¸ IP**
   ```python
   url: "http://192.168.0.163:<port>"  # âŒ ê³ ì •ë˜ì–´ ìˆìŒ
   ```
   â†’ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì—ì„œëŠ” ì‘ë™ ì•ˆ í•¨
   
   **í•´ê²°ì±…:** í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •
   ```python
   HOST_URL = os.getenv("HOST_URL", "http://localhost")
   ```

2. **íŒŒì¼ ë™ì‹œ ì ‘ê·¼ ë¬¸ì œ**
   - instances.jsonì„ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ìˆ˜ì •í•˜ë©´ ë°ì´í„° ì†ì‹¤ ê°€ëŠ¥
   - **í•´ê²°ì±…:** íŒŒì¼ ë½(lock) ì¶”ê°€

3. **`/api/challenges` ì—”ë“œí¬ì¸íŠ¸ ì—†ìŒ**
   - í”„ë¡ íŠ¸ì—”ë“œê°€ ì´ë¥¼ ê¸°ëŒ€í•¨
   - **í•´ê²°ì±…:** ìƒˆ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

### ê°œì„  ì œì•ˆ

| ê°œì„ ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ì„¤ëª… |
|---------|---------|------|
| requirements.txt ì¶”ê°€ | ğŸ”´ ë†’ìŒ | íŒ¨í‚¤ì§€ ê´€ë¦¬ í‘œì¤€í™” |
| HOST_URL í™˜ê²½ë³€ìˆ˜í™” | ğŸ”´ ë†’ìŒ | ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥ |
| /api/challenges ì¶”ê°€ | ğŸŸ¡ ì¤‘ê°„ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ê°œì„  |
| ì—ëŸ¬ í•¸ë“¤ë§ ê°œì„  | ğŸŸ¡ ì¤‘ê°„ | ì•ˆì •ì„± í–¥ìƒ |
| í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€ | ğŸŸ¡ ì¤‘ê°„ | í’ˆì§ˆ ë³´ì¦ |
| ë°ì´í„°ë² ì´ìŠ¤ ë„ì… | ğŸŸ¢ ë‚®ìŒ | ëŒ€ê·œëª¨ í™•ì¥ ì‹œ í•„ìš” |

---

## ï¿½ [v2.0] ì¸ì¦ ë° ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œ (2026-02-04)

### ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥

#### 1. ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- **JWT (JSON Web Token) ê¸°ë°˜ ì¸ì¦** 
- ë¡œê·¸ì¸/íšŒì›ê°€ì… ê¸°ëŠ¥
- í† í° ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬

#### 2. ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- **Admin** - ê´€ë¦¬ì (íšŒì› ê´€ë¦¬, ìŠ¤ì½”ì–´ë³´ë“œ ê´€ë¦¬)
- **User** - ì¼ë°˜ ì‚¬ìš©ì (ë¬¸ì œ í’€ê¸°, í”„ë¡œí•„ ê´€ë¦¬)

#### 3. ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥
- **íšŒì›ê°€ì…/ë¡œê·¸ì¸** - ì´ë©”ì¼ ê¸°ë°˜ íšŒì›ê°€ì…
- **í”„ë¡œí•„ ê´€ë¦¬** - Display Name, Bio ìˆ˜ì •
- **ë¹„ë°€ë²ˆí˜¸ ë³€ê²½** - ë³´ì•ˆ ì—…ë°ì´íŠ¸
- **ê³„ì • ê´€ë¦¬** - Admin ê¶Œí•œìœ¼ë¡œ ì‚¬ìš©ì ì‚­ì œ/ì—­í•  ë³€ê²½

#### 4. ìŠ¤ì½”ì–´ë³´ë“œ ì‹œìŠ¤í…œ
- **ì‹¤ì‹œê°„ ìˆœìœ„í‘œ** - ì‚¬ìš©ìë³„ ì ìˆ˜ í‘œì‹œ
- **ë¬¸ì œ í•´ê²° ì¶”ì ** - ì‚¬ìš©ìê°€ í’€ì€ ë¬¸ì œ ê¸°ë¡
- **ì ìˆ˜ ê³„ì‚°** - ë¬¸ì œë‹¹ 10ì  (ê¸°ë³¸ê°’, ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥)

#### 5. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- **íšŒì› ê´€ë¦¬** - ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ
- **ì—­í•  ê´€ë¦¬** - ì‚¬ìš©ì ì—­í•  ë³€ê²½ (User â†” Admin)
- **ì‚¬ìš©ì ì‚­ì œ** - ë¬¸ì œ ìˆëŠ” ê³„ì • ì œê±°

---

### ìƒˆë¡œìš´ íŒŒì¼ êµ¬ì¡°

```
hexactf/
â”œâ”€â”€ ğŸ“ auto_api/
â”‚   â”œâ”€â”€ api.py                # âœ¨ ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ models.py             # âœ¨ ìƒˆë¡œ ìƒì„± (ë°ì´í„° ëª¨ë¸)
â”‚   â”œâ”€â”€ auth.py               # âœ¨ ìƒˆë¡œ ìƒì„± (ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤)
â”‚   â”œâ”€â”€ token.py              # âœ¨ ìƒˆë¡œ ìƒì„± (JWT í† í° ì²˜ë¦¬)
â”‚   â”œâ”€â”€ auto_deploy.py        # (ê¸°ì¡´)
â”‚   â””â”€â”€ auto_stop.py          # (ê¸°ì¡´)
â”‚
â”œâ”€â”€ ğŸ“ static/
â”‚   â”œâ”€â”€ index.html            # âœ¨ ìˆ˜ì • (ë¡œê·¸ì¸, ëŒ€ì‹œë³´ë“œ UI)
â”‚   â”œâ”€â”€ app-auth.js           # âœ¨ ìƒˆë¡œ ìƒì„± (ì¸ì¦ ë¡œì§)
â”‚   â”œâ”€â”€ app-challenges.js     # âœ¨ ìƒˆë¡œ ìƒì„± (ë¬¸ì œ ê´€ë¦¬)
â”‚   â”œâ”€â”€ app-pages.js          # âœ¨ ìƒˆë¡œ ìƒì„± (í”„ë¡œí•„/ìŠ¤ì½”ì–´ë³´ë“œ/ê´€ë¦¬ì)
â”‚   â”œâ”€â”€ app.js                # âœ¨ ìˆ˜ì • (ë©”ì¸ ë¡œë”)
â”‚   â””â”€â”€ style.css             # âœ¨ ìˆ˜ì • (ìƒˆ UI ìŠ¤íƒ€ì¼)
â”‚
â”œâ”€â”€ ğŸ“ data/                  # âœ¨ ìƒˆë¡œ ìƒì„± (ì‚¬ìš©ì ë°ì´í„° ì €ì¥)
â”‚   â””â”€â”€ users.json            # âœ¨ ì‚¬ìš©ì ì •ë³´ ì €ì¥ (ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸)
â”‚
â”œâ”€â”€ (ê¸°ì¡´ íŒŒì¼ë“¤)
```

---

### ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸

#### ğŸ” ì¸ì¦ ê´€ë ¨

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  | ì„¤ëª… |
|-----------|--------|------|------|
| `/api/auth/register` | POST | ëˆ„êµ¬ë‚˜ | íšŒì›ê°€ì… |
| `/api/auth/login` | POST | ëˆ„êµ¬ë‚˜ | ë¡œê·¸ì¸ (JWT í† í° ë°œê¸‰) |
| `/api/auth/me` | GET | ë¡œê·¸ì¸ í•„ìˆ˜ | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| `/api/auth/profile` | PUT | ë¡œê·¸ì¸ í•„ìˆ˜ | í”„ë¡œí•„ ìˆ˜ì • |
| `/api/auth/change-password` | POST | ë¡œê·¸ì¸ í•„ìˆ˜ | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ |

**ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œ:**

```bash
# íšŒì›ê°€ì…
curl -X POST http://localhost:8000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "hacker123",
    "email": "hacker@example.com",
    "password": "SecurePassword123",
    "display_name": "í•´ì»¤123"
  }'

# ì‘ë‹µ
{
  "status": "ok",
  "access_token": "eyJhbGc...",
  "token_type": "bearer",
  "user": {
    "username": "hacker123",
    "email": "hacker@example.com",
    "display_name": "í•´ì»¤123",
    "role": "user",
    "score": 0,
    "solved_problems": []
  }
}
```

```bash
# ë¡œê·¸ì¸
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "hacker123",
    "password": "SecurePassword123"
  }'
```

#### ğŸ† ìŠ¤ì½”ì–´ë³´ë“œ

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/api/scoreboard` | GET | ì „ì²´ ì‚¬ìš©ì ìˆœìœ„ ì¡°íšŒ (ê³µê°œ) |

```bash
curl http://localhost:8000/api/scoreboard

# ì‘ë‹µ
{
  "status": "ok",
  "scoreboard": [
    {
      "rank": 1,
      "username": "pro_hacker",
      "display_name": "í”„ë¡œ í•´ì»¤",
      "score": 100,
      "solved_count": 10
    },
    ...
  ]
}
```

#### ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì ì „ìš©

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  | ì„¤ëª… |
|-----------|--------|------|------|
| `/api/admin/users` | GET | Admin | ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ |
| `/api/admin/users/{username}/role` | POST | Admin | ì‚¬ìš©ì ì—­í•  ë³€ê²½ |
| `/api/admin/users/{username}` | DELETE | Admin | ì‚¬ìš©ì ì‚­ì œ |

#### âœ¨ ê¸°ì¡´ ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì •

| ì—”ë“œí¬ì¸íŠ¸ | ë³€ê²½ì‚¬í•­ |
|-----------|---------|
| `POST /submit` | ì¸ì¦ í•„ìˆ˜ (Authorization í—¤ë” í•„ìš”) |
| `POST /start` | ì¸ì¦ í•„ìˆ˜ |
| `POST /stop/{id}` | ì¸ì¦ í•„ìˆ˜ |

---

### ë°±ì—”ë“œ êµ¬í˜„ ìƒì„¸

#### `auto_api/models.py`
Pydantic ëª¨ë¸ë¡œ API ìš”ì²­/ì‘ë‹µ í˜•ì‹ ì •ì˜:

```python
class UserRegisterRequest(BaseModel):
    username: str
    email: EmailStr
    password: str
    display_name: Optional[str]

class UserData:  # ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ í˜•ì‹
    username: str
    email: str
    password_hash: str  # SHA256 + Salt
    display_name: str
    role: UserRole  # "admin" or "user"
    bio: str
    created_at: str
    solved_problems: List[str]
```

#### `auto_api/auth.py`
ì‚¬ìš©ì ê´€ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§:

```python
class UserService:
    def create_user(username, email, password, display_name, role)
    def authenticate_user(username, password)
    def update_user_profile(username, display_name, bio, email)
    def change_password(username, old_password, new_password)
    def mark_problem_solved(username, problem_key)
    def get_scoreboard(limit=100)
    def get_all_users()  # Admin only
    def delete_user(username)  # Admin only
```

**ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ:**
- SHA256 í•´ì‹± + ëœë¤ Salt
- ì €ì¥ í˜•ì‹: `{salt}${hash}`

#### `auto_api/token.py`
JWT í† í° ê´€ë¦¬:

```python
class TokenService:
    @staticmethod
    def create_access_token(username, role)
        # 24ì‹œê°„ ìœ íš¨í•œ JWT ìƒì„±
    
    @staticmethod
    def verify_token(token)
        # í† í° ê²€ì¦ ë° ë””ì½”ë”©
```

#### `auto_api/api.py` ìˆ˜ì •ì‚¬í•­
- ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€ (`get_current_user()`, `get_admin_user()`)
- ëª¨ë“  ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸ì— Authorization í—¤ë” ê²€ì¦ ì¶”ê°€
- í”Œë˜ê·¸ ì œì¶œ ì‹œ ìë™ìœ¼ë¡œ ì ìˆ˜ ê³„ì‚° ë° ê¸°ë¡

---

### í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ìƒì„¸

#### `static/index.html` ë³€ê²½ì‚¬í•­
ê¸°ì¡´: ë‹¨ì¼ í˜ì´ì§€ (ë¬¸ì œ ëª©ë¡ë§Œ)  
ë³€ê²½ í›„: ë©€í‹° í˜ì´ì§€ (íƒ­ ê¸°ë°˜ ë„¤ë¹„ê²Œì´ì…˜)

- **ë¡œê·¸ì¸/íšŒì›ê°€ì…** - ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìë§Œ ë³¼ ìˆ˜ ìˆìŒ
- **Challenges** - ë¬¸ì œ ëª©ë¡ (ê¸°ì¡´ ê¸°ëŠ¥)
- **Scoreboard** - ì‹¤ì‹œê°„ ìˆœìœ„í‘œ
- **My Page** - í”„ë¡œí•„ ì •ë³´ ë° ìˆ˜ì •
- **Admin** - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (Adminë§Œ)

#### `static/app-auth.js`
ì¸ì¦ ê´€ë ¨ ë¡œì§:

```javascript
// localStorage ê´€ë¦¬
saveAuth(user, token)      // ë¡œê·¸ì¸ ì‹œ ì €ì¥
loadAuth()                 // í˜ì´ì§€ ë¡œë“œ ì‹œ ë³µêµ¬
clearAuth()                // ë¡œê·¸ì•„ì›ƒ ì‹œ ì‚­ì œ

// API í˜¸ì¶œ
async function apiCall(endpoint, method, body)
    // Authorization í—¤ë” ìë™ ì¶”ê°€

// UI ì „í™˜
showAuthPage()             // ë¡œê·¸ì¸ í™”ë©´
showMainApp()              // ë©”ì¸ ì•± í™”ë©´
```

#### `static/app-challenges.js`
ê¸°ì¡´ challenges ë¡œì§ ìœ ì§€ + ì¸ì¦ í†µí•©:

```javascript
// ë³€ê²½: ëª¨ë“  ìš”ì²­ì— Authorization í—¤ë” í•„ìˆ˜
POST /api/start
POST /api/stop/{id}
POST /api/submit           // â† ì¸ì¦ í•„ìˆ˜ë¡œ ë³€ê²½
```

#### `static/app-pages.js`
ìƒˆë¡œìš´ í˜ì´ì§€ ë¡œì§:

```javascript
async function loadProfilePage()       // í”„ë¡œí•„ ì •ë³´ í‘œì‹œ
async function loadScoreboard()        // ìˆœìœ„ í‘œì‹œ
async function loadAdminPage()         // íšŒì› ê´€ë¦¬
```

#### `static/style.css` ì¶”ê°€ ìŠ¤íƒ€ì¼
- `.auth-section` - ë¡œê·¸ì¸ í™”ë©´ ìŠ¤íƒ€ì¼
- `.page-section` - í˜ì´ì§€ íƒ­
- `.scoreboard-table` - ìˆœìœ„í‘œ
- `.profile-card` - í”„ë¡œí•„ ì¹´ë“œ
- `.admin-table` - ê´€ë¦¬ì í…Œì´ë¸”

---

### ë°ì´í„° ì €ì¥ í˜•ì‹

#### `data/users.json`
```json
{
  "hacker123": {
    "username": "hacker123",
    "email": "hacker@example.com",
    "password_hash": "a1b2c3d4$e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9",
    "display_name": "í•´ì»¤123",
    "role": "user",
    "bio": "CTF enthusiast",
    "created_at": "2026-02-04T10:30:00",
    "solved_problems": ["pwn1", "web1"]
  },
  "admin_user": {
    "username": "admin_user",
    ...
    "role": "admin",
    ...
  }
}
```

---

### ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ (ë¸Œë¼ìš°ì €)

í´ë¼ì´ì–¸íŠ¸ê°€ ì €ì¥í•˜ëŠ” ì •ë³´:
```javascript
localStorage.hexactf_token    // JWT í† í°
localStorage.hexactf_user     // ì‚¬ìš©ì ì •ë³´ JSON
```

---

### ì¸ì¦ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì ë°©ë¬¸     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    localStorage í™•ì¸
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
  ìˆìŒ      ì—†ìŒ
    â”‚         â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚ ë¡œê·¸ì¸ í™”ë©´ â”‚
    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚    â”‚ íšŒì›ê°€ì…    â”‚
    â”‚    â”‚ ë¡œê·¸ì¸      â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â”‚      API í˜¸ì¶œ (/api/auth/register or /api/auth/login)
    â”‚           â”‚
    â”‚      JWT í† í° ë°œê¸‰
    â”‚           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ë©”ì¸ ì•± ë¡œë“œ     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ Challenges    â”‚
    â”‚ â€¢ Scoreboard    â”‚
    â”‚ â€¢ My Page       â”‚
    â”‚ â€¢ Admin (ì„ íƒ)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ì‚¬ìš© ì˜ˆì‹œ

#### ì‚¬ìš©ì ê´€ì 

1. **ì²˜ìŒ ë°©ë¬¸**
   - íšŒì›ê°€ì… í˜ì´ì§€ ë³´ì„
   - Username, Email, Password ì…ë ¥
   - "ê°€ì…" í´ë¦­ â†’ ìë™ ë¡œê·¸ì¸

2. **ë¬¸ì œ í’€ê¸°**
   - "Challenges" íƒ­
   - "Start Instance" â†’ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
   - ë¬¸ì œ í•´ê²° â†’ í”Œë˜ê·¸ ì œì¶œ
   - ì ìˆ˜ ìë™ ì¶”ê°€

3. **ìˆœìœ„ í™•ì¸**
   - "Scoreboard" íƒ­
   - ì „ì²´ ì‚¬ìš©ì ìˆœìœ„ í‘œì‹œ

4. **í”„ë¡œí•„ ê´€ë¦¬**
   - "My Page" íƒ­
   - Display Name, Bio ìˆ˜ì •
   - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

#### ê´€ë¦¬ì ê´€ì 

1. **íšŒì› ê´€ë¦¬**
   - "Admin" íƒ­
   - ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ
   - ì—­í•  ë³€ê²½ (User â†” Admin)
   - ì‚¬ìš©ì ì‚­ì œ

---

### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

âœ… **êµ¬í˜„ëœ ë³´ì•ˆ:**
- JWT í† í° (24ì‹œê°„ ìœ íš¨)
- ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (SHA256 + Salt)
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´

âš ï¸ **ì¶”ê°€ ê¶Œì¥ì‚¬í•­:**
- HTTPS ì‚¬ìš© (í”„ë¡œë•ì…˜)
- Refresh Token êµ¬í˜„ (í† í° ê°±ì‹ )
- Rate Limiting (ë¡œê·¸ì¸ ì‹œë„ ì œí•œ)
- CSRF ë³´í˜¸
- ì„¸ì…˜ ê´€ë¦¬ ê°•í™”

---

### ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

ê¸°ì¡´ ì‹œìŠ¤í…œ (v1.0) â†’ ìƒˆ ì‹œìŠ¤í…œ (v2.0)

1. **ì²˜ìŒë¶€í„° ì‹œì‘í•˜ëŠ” ê²½ìš°:**
   ```bash
   pip install fastapi uvicorn pydantic python-multipart
   python -m uvicorn auto_api.api:app --reload
   ```

2. **ê¸°ì¡´ instances.json ìœ ì§€:**
   - ê¸°ì¡´ì˜ `instances.json` ì‚¬ìš© ê°€ëŠ¥
   - ìƒˆë¡œìš´ `data/users.json`ì€ ìë™ ìƒì„±

3. **challenges.json ë³€ê²½ ì—†ìŒ:**
   - ê¸°ì¡´ í¬ë§· ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥

---

### ì„¤ì • í™˜ê²½ë³€ìˆ˜

```bash
# ì„ íƒì‚¬í•­
export SECRET_KEY="your-secret-key-for-production"
export HOST_URL="http://your-domain.com"
```

---

**ë²„ì „:** v2.0  
**ì—…ë°ì´íŠ¸ ì¼ì‹œ:** 2026-02-04  
**ì£¼ìš” ë³€ê²½:** ì¸ì¦ ì‹œìŠ¤í…œ + ì‚¬ìš©ì ê´€ë¦¬ + ìŠ¤ì½”ì–´ë³´ë“œ

````

---

## ğŸ” ë¡œê·¸ì¸/ê¶Œí•œ ê¸°ëŠ¥ ì¶”ê°€ (2026-02-04)

ì´ë²ˆ ì—…ë°ì´íŠ¸ì—ì„œ **ê´€ë¦¬ì/ì¼ë°˜ ì‚¬ìš©ì ë¶„ë¦¬**ë¥¼ ìœ„í•œ ë¡œê·¸ì¸ ê¸°ëŠ¥ê³¼ ê¶Œí•œ ê¸°ë°˜ APIë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

### âœ… í•µì‹¬ ë™ì‘
- **ì²« ë²ˆì§¸ íšŒì› ê°€ì…ìëŠ” ìë™ìœ¼ë¡œ ê´€ë¦¬ì(Admin)**ê°€ ë©ë‹ˆë‹¤.
- ì´í›„ ê°€ì…ìëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ì¼ë°˜ ì‚¬ìš©ì(User)** ì…ë‹ˆë‹¤.
- ëª¨ë“  ë³´í˜¸ APIëŠ” `Authorization: Bearer <token>` í—¤ë”ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### ğŸ“Œ ì¼ë°˜ ì‚¬ìš©ì ê¸°ëŠ¥
- ë¬¸ì œ ë‹¤ìš´ë¡œë“œ
- í”Œë˜ê·¸ ì œì¶œ
- ìŠ¤ì½”ì–´ë³´ë“œ ì¡°íšŒ
- ë‚´ í”„ë¡œí•„ ì¡°íšŒ/ìˆ˜ì •
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

### ğŸ›¡ ê´€ë¦¬ì ê¸°ëŠ¥
- ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ/ì‚­ì œ
- ì‚¬ìš©ì ì—­í•  ë³€ê²½
- ë¬¸ì œ ì¶”ê°€/ì‚­ì œ
- ìŠ¤ì½”ì–´ë³´ë“œ ì´ˆê¸°í™”

---

## âœ… ì‹ ê·œ/ë³€ê²½ëœ ì£¼ìš” API

### 1) ì¸ì¦
```
POST /api/auth/register
POST /api/auth/login
GET  /api/auth/me
PUT  /api/auth/profile
POST /api/auth/change-password
```

### 2) ì‚¬ìš©ì ê¸°ëŠ¥ (ë¡œê·¸ì¸ í•„ìš”)
```
POST /start
POST /stop/{instance_id}
GET  /api/download/{problem_key}/{file_index}
POST /submit
GET  /api/scoreboard
```

### 3) ê´€ë¦¬ì ê¸°ëŠ¥ (Admin ì „ìš©)
```
GET    /api/admin/users
DELETE /api/admin/users/{username}
POST   /api/admin/users/{username}/role
POST   /api/admin/challenges
DELETE /api/admin/challenges/{problem_key}
POST   /api/admin/scoreboard/reset
```

---

## âœ… ì°¸ê³ ì‚¬í•­
- `/api/scoreboard`ëŠ” ì´ì œ **ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥**í•©ë‹ˆë‹¤.
- ë¬¸ì œ ì¶”ê°€ëŠ” `POST /api/admin/challenges`ì—ì„œ `key`ì™€ `challenge` ê°ì²´ë¥¼ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.
- ìŠ¤ì½”ì–´ë³´ë“œëŠ” `solved_problems` ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°ë˜ë©°, ê´€ë¦¬ìë§Œ ë¦¬ì…‹ ê°€ëŠ¥í•©ë‹ˆë‹¤.


---

## ğŸ§© ì˜¤ë¥˜ ì •ë¦¬: ModuleNotFoundError: No module named 'docker'

### ì›ì¸
- Pythonì—ì„œ Docker SDK(`docker` íŒ¨í‚¤ì§€)ê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì•„ì„œ `auto_api/auto_deploy.py` import ì‹œ ì‹¤íŒ¨

### í•´ê²°
- ê°€ìƒí™˜ê²½ì—ì„œ ì•„ë˜ ì„¤ì¹˜ ì‹¤í–‰

```bash
pip install docker
```

### ë³´ì™„ ì‚¬í•­
- Docker SDK ë¯¸ì„¤ì¹˜ ì‹œì—ë„ ì„œë²„ê°€ ëœ¨ë„ë¡ `auto_deploy.py`/`auto_stop.py`ì—ì„œ **ì§€ì—° import** ì²˜ë¦¬
- ì´í›„ ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œì ì—ë§Œ ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜


---

## ğŸ” íšŒì›ê°€ì…/ë¡œê·¸ì¸ ë¡œì§ (ê°„ë‹¨í˜•)

### ê¸°ë³¸ ê·œì¹™
- **ê´€ë¦¬ì ê³„ì •ì€ ê³ ì •**: `admin / admin`
- ì¼ë°˜ ì‚¬ìš©ìëŠ” íšŒì›ê°€ì… ì‹œ **ì´ë¦„/ì „í™”ë²ˆí˜¸/ì´ë©”ì¼**ë§Œ ì…ë ¥
- **ë¡œê·¸ì¸ ì•„ì´ë””(username)ëŠ” ì´ë©”ì¼**
- **ë¡œê·¸ì¸ ë¹„ë°€ë²ˆí˜¸ëŠ” ì „í™”ë²ˆí˜¸**ë¡œ ì‚¬ìš©

### ì²˜ë¦¬ íë¦„
1) íšŒì›ê°€ì… ìš”ì²­
   - ì…ë ¥: `name`, `phone`, `email`
   - ì €ì¥: `username=email`, `display_name=name`, `password=phone`
2) ë¡œê·¸ì¸ ìš”ì²­
   - ì…ë ¥: `username=email`, `password=phone`

### ìˆ˜ì • ë°©ë²•
- **ê´€ë¦¬ì ê³„ì • ë³€ê²½**: `auto_api/auth.py`ì˜ `ensure_default_admin()` ìˆ˜ì •
- **ë¹„ë°€ë²ˆí˜¸ ê·œì¹™ ë³€ê²½**: `auto_api/api.py`ì˜ `/api/auth/register`ì—ì„œ `password=req.phone` ë¶€ë¶„ ìˆ˜ì •
- **ì‚¬ìš©ì í”„ë¡œí•„ í•­ëª© ë³€ê²½**: 
  - ë°±ì—”ë“œ: `auto_api/models.py`ì˜ `UserRegisterRequest`, `UserUpdateProfileRequest`
  - í”„ë¡ íŠ¸: `static/index.html`, `static/app-auth.js`, `static/app-pages.js`

